<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.3">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.3" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.0.3',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="Hexo, NexT" />


<meta name="description" content="ProGit起步从源代码安装从源码安装 Git，需要安装 Git 依赖的库：curl、zlib、openssl、expat，还有libiconv。如果你的系统上有 yum（如 Fedora）或者 apt-get（如基于 Debian 的系统），可以使用以下命令之一来安装最小化的依赖包来编译和安装 Git 的二进制版： 1234$ sudo yum install curl-devel expat-">
<meta property="og:type" content="article">
<meta property="og:title" content="UpperYounger">
<meta property="og:url" content="http://sangyang.github.io/2018/02/23/ProGit/index.html">
<meta property="og:site_name" content="UpperYounger">
<meta property="og:description" content="ProGit起步从源代码安装从源码安装 Git，需要安装 Git 依赖的库：curl、zlib、openssl、expat，还有libiconv。如果你的系统上有 yum（如 Fedora）或者 apt-get（如基于 Debian 的系统），可以使用以下命令之一来安装最小化的依赖包来编译和安装 Git 的二进制版： 1234$ sudo yum install curl-devel expat-">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-02-22T18:27:34.473Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="UpperYounger">
<meta name="twitter:description" content="ProGit起步从源代码安装从源码安装 Git，需要安装 Git 依赖的库：curl、zlib、openssl、expat，还有libiconv。如果你的系统上有 yum（如 Fedora）或者 apt-get（如基于 Debian 的系统），可以使用以下命令之一来安装最小化的依赖包来编译和安装 Git 的二进制版： 1234$ sudo yum install curl-devel expat-">






  <link rel="canonical" href="http://sangyang.github.io/2018/02/23/ProGit/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>
  <title> | UpperYounger</title>
  






  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?96b42932dfa8f6e35795ec450a0edc3f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">UpperYounger</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />日程表</a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />站点地图</a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />公益 404</a>
        </li>
      

      
    </ul>
  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sangyang.github.io/2018/02/23/ProGit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="UpperYounger">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="UpperYounger">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline"></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-23T02:27:53+08:00">2018-02-23</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="ProGit"><a href="#ProGit" class="headerlink" title="ProGit"></a>ProGit</h1><h2 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h2><h3 id="从源代码安装"><a href="#从源代码安装" class="headerlink" title="从源代码安装"></a>从源代码安装</h3><p>从源码安装 Git，需要安装 Git 依赖的库：curl、zlib、openssl、expat，还有libiconv。如果你的系统上有 yum（如 Fedora）或者 apt-get（如基于 Debian 的系统），可以使用以下命令之一来安装最小化的依赖包来编译和安装 Git 的二进制版：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo yum install curl-devel expat-devel gettext-devel \</span><br><span class="line">  openssl-devel zlib-devel</span><br><span class="line"><span class="meta">$</span> sudo apt-get install libcurl4-gnutls-dev libexpat1-dev gettext \</span><br><span class="line">  libz-dev libssl-dev</span><br></pre></td></tr></table></figure>
<p>为了能够添加更多格式的文档（如 doc, html, info），你需要安装以下的依赖包：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo yum install asciidoc xmlto docbook2x</span><br><span class="line"><span class="meta">$</span> sudo apt-get install asciidoc xmlto docbook2x</span><br></pre></td></tr></table></figure></p>
<p>当你安装好所有的必要依赖，你可以继续从几个地方来取得最新发布版本的 tar 包。你可以从 Kernel.org 或从 GitHub 网站获取，通常在 GitHub 上的是最新版本，但 kernel.org 上包含有文件下载签名，如果你想验证下载正确性的话会用到。<br><a href="https://www.kernel.org/pub/software/scm/git" target="_blank" rel="noopener">https://www.kernel.org/pub/software/scm/git</a><br><a href="https://github.com/git/git/releases" target="_blank" rel="noopener">https://github.com/git/git/releases</a>  </p>
<p>接着，编译并安装：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> tar -zxf git-2.0.0.tar.gz</span><br><span class="line"><span class="meta">$</span> cd git-2.0.0</span><br><span class="line"><span class="meta">$</span> make configure</span><br><span class="line"><span class="meta">$</span> ./configure --prefix=/usr</span><br><span class="line"><span class="meta">$</span> make all doc info</span><br><span class="line"><span class="meta">$</span> sudo make install install-doc install-html install-info</span><br></pre></td></tr></table></figure></p>
<p>完成后，你可以使用 Git 来获取 Git 的升级：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git clone git://git.kernel.org/pub/scm/git/git.git</span><br></pre></td></tr></table></figure></p>
<h3 id="初次运行Git前的配置"><a href="#初次运行Git前的配置" class="headerlink" title="初次运行Git前的配置"></a>初次运行Git前的配置</h3><p>Git 自带一个 git config 的工具来帮助设置控制 Git 外观和行为的配置变量。这些变量存储在三个不同的位置：</p>
<ol>
<li>/etc/gitconfig 文件: 包含系统上每一个用户及他们仓库的通用配置。 如果使用带有 –system 选项的 git config 时，它会从此文件读写配置变量。</li>
<li>~/.gitconfig 或 ~/.config/git/config 文件：只针对当前用户。 可以传递 –global 选项让 Git 读写此文件。</li>
<li>当前使用仓库的 Git 目录中的 config 文件（就是 .git/config）：针对该仓库。</li>
</ol>
<p>每一个级别覆盖上一级别的配置，所以 .git/config 的配置变量会覆盖 /etc/gitconfig 中的配置变量。</p>
<p>在 Windows 系统中，Git 会查找 <code>$HOME</code> 目录下（一般情况下是 <code>C:\Users\$USER</code>）的 .gitconfig 文件。Git 同样也会寻找 /etc/gitconfig 文件，但只限于 MSys 的根目录下，即安装 Git 时所选的目标位置。</p>
<p><strong>用户信息</strong></p>
<p>设置你的用户名称与邮件地址。每一个 Git 的提交都会使用这些信息，并且它会写入到你的每一次提交中，不可更改：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git config --global user.name "John Doe"</span><br><span class="line"><span class="meta">$</span> git config --global user.email johndoe@example.com</span><br></pre></td></tr></table></figure></p>
<p><strong>文本编辑器</strong></p>
<p>配置默认文本编辑器了，当 Git 需要你输入信息时会调用它。如果未配置，Git 会使用操作系统默认的文本编辑器，通常是 Vim。如果你想使用不同的文本编辑器，例如 Emacs，可以这样做：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git config --global core.editor emacs</span><br></pre></td></tr></table></figure></p>
<p><strong>检查配置信息</strong></p>
<p>如果想要检查你的配置，可以使用 git config –list 命令来列出所有 Git 当时能找到的配置。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git config --list</span><br><span class="line">user.name=John Doe</span><br><span class="line">user.email=johndoe@example.com</span><br><span class="line">color.status=auto</span><br><span class="line">color.branch=auto</span><br><span class="line">color.interactive=auto</span><br><span class="line">color.diff=auto</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>你可能会看到重复的变量名，因为 Git 会从不同的文件中读取同一个配置（例如：/etc/gitconfig 与 ~/.gitconfig）。这种情况下，Git 会使用它找到的每一个变量的最后一个配置。</p>
<p>你可以通过输入 git config <key>： 来检查 Git 的某一项配置<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git config user.name</span><br><span class="line">John Doe</span><br></pre></td></tr></table></figure></key></p>
<p><strong>获取帮助</strong></p>
<p>找到 Git 命令的使用手册：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git help &lt;verb&gt;</span><br><span class="line"><span class="meta">$</span> git &lt;verb&gt; --help</span><br><span class="line"><span class="meta">$</span> man git-&lt;verb&gt;</span><br></pre></td></tr></table></figure></p>
<p>例如，要想获得 config 命令的手册，执行<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git help config</span><br></pre></td></tr></table></figure></p>
<h2 id="Git-基础"><a href="#Git-基础" class="headerlink" title="Git 基础"></a>Git 基础</h2><h3 id="获取-Git-仓库"><a href="#获取-Git-仓库" class="headerlink" title="获取 Git 仓库"></a>获取 Git 仓库</h3><p><strong>在现有目录中初始化仓库</strong></p>
<p>进入该项目目录并输入：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git init</span><br></pre></td></tr></table></figure></p>
<p>开始跟踪这些文件并提交。通过 git add 命令来实现对指定文件的跟踪，然后执行 git commit 提交：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git add *.c</span><br><span class="line"><span class="meta">$</span> git add LICENSE</span><br><span class="line"><span class="meta">$</span> git commit -m 'initial project version'</span><br></pre></td></tr></table></figure></p>
<p><strong>克隆现有的仓库</strong></p>
<p>Git 区别于其它版本控制系统的一个重要特性，Git 克隆的是该 Git 仓库服务器上的几乎所有数据，而不是仅仅复制完成你的工作所需要文件。事实上，如果你的服务器的磁盘坏掉了，你通常可以使用任何一个克隆下来的用户端来重建服务器上的仓库。比如，要克隆 Git 的可链接库 libgit2，可以用下面的命令（自定义本地仓库的名字）：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git clone https://github.com/libgit2/libgit2</span><br><span class="line"><span class="meta">$</span> git clone https://github.com/libgit2/libgit2 mylibgit</span><br></pre></td></tr></table></figure></p>
<p>Git 支持多种数据传输协议。上面的例子使用的是 https:// 协议，不过你也可以使用 git:// 协议或者使用 SSH 传输协议。</p>
<h3 id="记录每次更新到仓库"><a href="#记录每次更新到仓库" class="headerlink" title="记录每次更新到仓库"></a>记录每次更新到仓库</h3><p><strong>跟踪新文件</strong></p>
<p>使用命令 git add 开始跟踪一个文件。所以，要跟踪 README 文件，运行：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git add README</span><br></pre></td></tr></table></figure></p>
<p><strong>状态简览</strong></p>
<p>使用 git status -s 命令或 git status –short 命令，你将得到一种更为紧凑的格式输出。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git status -s</span><br><span class="line">M README</span><br><span class="line">MM Rakefile</span><br><span class="line">A lib/git.rb</span><br><span class="line">M lib/simplegit.rb</span><br><span class="line">?? LICENSE.txt</span><br></pre></td></tr></table></figure></p>
<pre><code>?? 标记新添加的未跟踪文件
A  标记新添加到暂存区中的文件
M  标记修改过的文件，有两个可以出现的位置，出现在右边的 M 表示该文件被修改了但是还没放入暂存区，出现在靠左边的 M 表示该文件被修改了并放入了暂存区。
</code></pre><p><strong>忽略文件</strong></p>
<p>创建一个名为 .gitignore 的文件，列出要忽略的文件模式。.gitignore 的格式规范如下：</p>
<pre><code>• 所有空行或者以 ＃ 开头的行都会被 Git 忽略。
• 可以使用标准的 glob 模式匹配。
• 匹配模式可以以（/）开头防止递归。
• 匹配模式可以以（/）结尾指定目录。
• 要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反。

所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。星号（*）匹配零个或多个任意字符；[abc] 匹配任何一个列在方括号中的字符（这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c）；问号（?）只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如 [0-9] 表示匹配所有 0 到 9 的数字）。使用两个星号（*) 表示匹配任意中间目录，比如`a/**/z` 可以匹配 a/z, a/b/z 或 `a/b/c/z`等。
</code></pre><p>一个 .gitignore 文件的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># no .a files</span><br><span class="line">*.a</span><br><span class="line"></span><br><span class="line"># but do track lib.a, even though you&apos;re ignoring .a files above</span><br><span class="line">!lib.a</span><br><span class="line"></span><br><span class="line"># only ignore the TODO file in the current directory, not subdir/TODO</span><br><span class="line">/TODO</span><br><span class="line"></span><br><span class="line"># ignore all files in the build/ directory</span><br><span class="line">build/</span><br><span class="line"></span><br><span class="line"># ignore doc/notes.txt, but not doc/server/arch.txt</span><br><span class="line">doc/*.txt</span><br><span class="line"></span><br><span class="line"># ignore all .pdf files in the doc/ directory</span><br><span class="line">doc/**/*.pdf</span><br></pre></td></tr></table></figure></p>
<p>GitHub 有一个十分详细的针对数十种项目及语言的 .gitignore 文件列表，你可以在 <a href="https://github.com/github/gitignore" target="_blank" rel="noopener">https://github.com/github/gitignore</a> 找到它.</p>
<p><strong>查看已暂存和未暂存的修改</strong></p>
<p>git diff 将通过文件补丁的格式显示具体哪些行发生了改变。<br><code>git diff</code>：比较的是工作目录中当前文件和暂存区域快照之间的差异，也就是修改之后还没有暂存起来的变化内容。<br><code>git diff --cached</code>或者<code>git diff --staged</code>：查看已暂存的将要添加到下次提交里的内容。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span>git diff</span><br><span class="line">diff --git a/LICENSE b/LICENSE</span><br><span class="line">index 9c87789..ed1a00e 100644</span><br><span class="line">--- a/LICENSE</span><br><span class="line">+++ b/LICENSE</span><br><span class="line">@@ -1,2 +1,2 @@</span><br><span class="line">-</span><br><span class="line">-a test</span><br><span class="line">+one-</span><br><span class="line">+two-a test</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span>git diff --cached</span><br><span class="line">diff --git a/LICENSE b/LICENSE</span><br><span class="line">index e69de29..9c87789 100644</span><br><span class="line">--- a/LICENSE</span><br><span class="line">+++ b/LICENSE</span><br><span class="line">@@ -0,0 +1,2 @@</span><br><span class="line">+</span><br><span class="line">+a test</span><br></pre></td></tr></table></figure></p>
<p><em>Git Diff 的插件版本</em></p>
<p>如果你喜欢通过图形化的方式或其它格式输出方式的话，可以使用 git difftool 命令来用 Araxis ，emerge 或 vimdiff 等软件输出 diff 分析结果。使用 git difftool –tool-help 命令来看你的系统支持哪些 Git Diff 插件。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span>git difftool --tool=vimdiff</span><br><span class="line"><span class="meta">$</span>git difftool --tool=vimdiff --cached</span><br></pre></td></tr></table></figure></p>
<p><strong>提交更新</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 不带参数的方式会启动文本编辑器以便输入本次提交的说明。</span><br><span class="line"><span class="meta">#</span> `-v` 选项，将你所做的改变的 diff 输出放到编辑器中。</span><br><span class="line"><span class="meta">#</span> `-m` 选项，将提交信息与命令放在同一行。</span><br><span class="line"><span class="meta">#</span> `-a` 选项，自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 git add 步骤。</span><br><span class="line"><span class="meta">$</span> git commit</span><br><span class="line"><span class="meta">$</span> git commit -v</span><br><span class="line"><span class="meta">$</span> git commit -m 'first commit'</span><br><span class="line"><span class="meta">$</span> git commit -a -m 'added new benchmarks'</span><br></pre></td></tr></table></figure>
<p><strong>移除文件</strong></p>
<p>git rm 从已跟踪文件清单中移除（确切地说，是从暂存区域移除），并连带从工作目录中删除指定的文件，这样以后就不会出现在未跟踪文件清单中了。如果删除之前修改过并且已经放到暂存区域的话，则必须要用强制删除选项 -f（译注：即 force 的首字母）。这是一种安全特性，用于防止误删还没有添加到快照的数据，这样的数据不能被 Git 恢复。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git rm PROJECTS.md</span><br></pre></td></tr></table></figure></p>
<p>另外一种情况是，我们想把文件从 Git 仓库中删除（亦即从暂存区域移除），但仍然希望保留在当前工作目录中。换句话说，你想让文件保留在磁盘，但是并不想让 Git 继续跟踪。为达到这一目的，使用 –cached 选项：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git rm --cached README</span><br></pre></td></tr></table></figure></p>
<p>git rm 命令后面可以列出文件或者目录的名字，也可以使用 glob 模式。如下示例，星号 <code>*</code> 之前的反斜杠 \，因为 Git 有它自己的文件模式扩展匹配方式，所以我们不用 shell 来帮忙展开。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git rm log/\*.log  #删除 log/ 目录下扩展名为 .log 的所有文件</span><br><span class="line"><span class="meta">$</span> git rm \*~         #删除以 ~ 结尾的所有文件</span><br></pre></td></tr></table></figure></p>
<p><strong>移动文件</strong></p>
<p>在 Git 中对文件改名，可以这么做：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git mv README.md README</span><br></pre></td></tr></table></figure></p>
<p>其实，运行 git mv 就相当于运行了下面三条命令：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> mv README.md README</span><br><span class="line"><span class="meta">$</span> git rm README.md</span><br><span class="line"><span class="meta">$</span> git add README</span><br></pre></td></tr></table></figure></p>
<p><strong>查看提交历史</strong></p>
<p>Git 在输出所有提交时会自动调用分页程序，所以你一次只会看到一页的内容。<br>默认不用任何参数的话，git log 会按提交时间列出所有的更新，最近的更新排在最上面。</p>
<p>Table. <code>git log</code> 的常用选项</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-p</td>
<td style="text-align:left">按补丁格式显示每个更新之间的差异。</td>
</tr>
<tr>
<td style="text-align:left">–stat</td>
<td style="text-align:left">显示每次更新的文件修改统计信息。</td>
</tr>
<tr>
<td style="text-align:left">–shortstat</td>
<td style="text-align:left">只显示 –stat 中最后的行数修改添加移除统计。</td>
</tr>
<tr>
<td style="text-align:left">–name-only</td>
<td style="text-align:left">仅在提交信息后显示已修改的文件清单。</td>
</tr>
<tr>
<td style="text-align:left">–name-status</td>
<td style="text-align:left">显示新增、修改、删除的文件清单。</td>
</tr>
<tr>
<td style="text-align:left">–abbrev-commit</td>
<td style="text-align:left">仅显示 SHA-1 的前几个字符，而非所有的 40 个字符。</td>
</tr>
<tr>
<td style="text-align:left">–relative-date</td>
<td style="text-align:left">使用较短的相对时间显示（比如，“2 weeks ago”）。</td>
</tr>
<tr>
<td style="text-align:left">–graph</td>
<td style="text-align:left">显示 ASCII 图形表示的分支合并历史。</td>
</tr>
<tr>
<td style="text-align:left">–pretty</td>
<td style="text-align:left">使用其他格式显示历史提交信息。可用的选项包括 oneline，short，full，fuller 和 format（后跟指定格式）。</td>
</tr>
</tbody>
</table>
<p>–pretty 选项有一些内建的子选项 oneline 或 format 与另一个 log 选项 –graph 结合使用时添加了一些ASCII字符串来形象地展示你的分支、合并历史。</p>
<p>Table. <code>git log --pretty=format</code> 常用的选项</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">%H</td>
<td style="text-align:left">提交对象（commit）的完整哈希字串</td>
</tr>
<tr>
<td style="text-align:left">%h</td>
<td style="text-align:left">提交对象的简短哈希字串</td>
</tr>
<tr>
<td style="text-align:left">%T</td>
<td style="text-align:left">树对象（tree）的完整哈希字串</td>
</tr>
<tr>
<td style="text-align:left">%t</td>
<td style="text-align:left">树对象的简短哈希字串</td>
</tr>
<tr>
<td style="text-align:left">%P</td>
<td style="text-align:left">父对象（parent）的完整哈希字串</td>
</tr>
<tr>
<td style="text-align:left">%p</td>
<td style="text-align:left">父对象的简短哈希字串</td>
</tr>
<tr>
<td style="text-align:left">%an</td>
<td style="text-align:left">作者（author）的名字</td>
</tr>
<tr>
<td style="text-align:left">%ae</td>
<td style="text-align:left">作者的电子邮件地址</td>
</tr>
<tr>
<td style="text-align:left">%ad</td>
<td style="text-align:left">作者修订日期（可以用 –date= 选项定制格式）</td>
</tr>
<tr>
<td style="text-align:left">%ar</td>
<td style="text-align:left">作者修订日期，按多久以前的方式显示</td>
</tr>
<tr>
<td style="text-align:left">%cn</td>
<td style="text-align:left">提交者(committer)的名字</td>
</tr>
<tr>
<td style="text-align:left">%ce</td>
<td style="text-align:left">提交者的电子邮件地址</td>
</tr>
<tr>
<td style="text-align:left">%cd</td>
<td style="text-align:left">提交日期</td>
</tr>
<tr>
<td style="text-align:left">%cr</td>
<td style="text-align:left">提交日期，按多久以前的方式显示</td>
</tr>
<tr>
<td style="text-align:left">%s</td>
<td style="text-align:left">提交说明</td>
</tr>
</tbody>
</table>
<p>Table. 限制 <code>git log</code> 输出的选项</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-(n)</td>
<td style="text-align:left">仅显示最近的 n 条提交</td>
</tr>
<tr>
<td style="text-align:left">–since, –after</td>
<td style="text-align:left">仅显示指定时间之后的提交。</td>
</tr>
<tr>
<td style="text-align:left">–until, –before</td>
<td style="text-align:left">仅显示指定时间之前的提交。</td>
</tr>
<tr>
<td style="text-align:left">–author</td>
<td style="text-align:left">仅显示指定作者相关的提交。</td>
</tr>
<tr>
<td style="text-align:left">–committer</td>
<td style="text-align:left">仅显示指定提交者相关的提交。</td>
</tr>
<tr>
<td style="text-align:left">–grep</td>
<td style="text-align:left">仅显示含指定关键字的提交</td>
</tr>
<tr>
<td style="text-align:left">–all-match</td>
<td style="text-align:left">仅显示同时含多个指定关键字的提交</td>
</tr>
<tr>
<td style="text-align:left">-S</td>
<td style="text-align:left">仅显示添加或移除了某个关键字的提交</td>
</tr>
</tbody>
</table>
<p>如果只关心某些文件或者目录的历史提交，可以在 git log 选项的最后指定它们的路径。因为是放在最后位置上的选项，所以用两个短划线（–）隔开之前的选项和后面限定的路径名。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git log</span><br><span class="line">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date: Mon Mar 17 21:52:11 2008 -0700</span><br><span class="line"></span><br><span class="line">    changed the version number</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> git log -p -2</span><br><span class="line">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date: Mon Mar 17 21:52:11 2008 -0700</span><br><span class="line"></span><br><span class="line">    changed the version number</span><br><span class="line"></span><br><span class="line">diff --git a/Rakefile b/Rakefile</span><br><span class="line">index a874b73..8f94139 100644</span><br><span class="line">--- a/Rakefile</span><br><span class="line">+++ b/Rakefile</span><br><span class="line">@@ -5,7 +5,7 @@ require 'rake/gempackagetask'</span><br><span class="line">s.name = "simplegit"</span><br><span class="line">- s.version = "0.1.0"</span><br><span class="line">+ s.version = "0.1.1"</span><br><span class="line">s.author = "Scott Chacon"</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> git log --stat</span><br><span class="line">commit a11bef06a3f659402fe7563abf99ad00de2209e6</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date: Sat Mar 15 10:31:28 2008 -0700</span><br><span class="line"></span><br><span class="line">    first commit</span><br><span class="line"></span><br><span class="line">README | 6 ++++++</span><br><span class="line">Rakefile | 23 +++++++++++++++++++++++</span><br><span class="line">lib/simplegit.rb | 25 +++++++++++++++++++++++++</span><br><span class="line">3 files changed, 54 insertions(+)</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> git log --pretty=oneline</span><br><span class="line">ca82a6dff817ec66f44342007202690a93763949 changed the version number</span><br><span class="line">a11bef06a3f659402fe7563abf99ad00de2209e6 first commit</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> git log --pretty=format:"%h - %an, %ar : %s"</span><br><span class="line">ca82a6d - Scott Chacon, 6 years ago : changed the version number</span><br><span class="line">a11bef0 - Scott Chacon, 6 years ago : first commit</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> git log --pretty=format:"%h %s" --graph</span><br><span class="line">* 2d3acf9 ignore errors from SIGCHLD on trap</span><br><span class="line">* 5e3ee11 Merge branch 'master' of git://github.com/dustin/grit</span><br><span class="line">|\</span><br><span class="line">| * 420eac9 Added a method for getting the current branch.</span><br><span class="line">* | e1193f8 support for heads with slashes in them</span><br><span class="line">|/</span><br><span class="line">* 11d191e Merge branch 'defunkt' into local</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 列出所有最近两周内的提交</span><br><span class="line"><span class="meta">$</span> git log --since=2.weeks</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 找出添加或移除了某一个特定函数的引用的提交</span><br><span class="line"><span class="meta">$</span> git log -Sfunction_name</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看 Git 仓库中，2008 年 10 月期间，Junio Hamano 提交的但未合并的测试文件</span><br><span class="line"><span class="meta">$</span> git log --pretty="%h - %s" --author=gitster --since="2008-10-01" \</span><br><span class="line">--before="2008-11-01" --no-merges -- t/</span><br><span class="line">5610e3b - Fix testcase failure when extended attributes are in use</span><br><span class="line">acd3b9e - Enhance hold_lock_file_for_&#123;update,append&#125;() API</span><br><span class="line">f563754 - demonstrate breakage of detached checkout with symbolic link HEAD</span><br></pre></td></tr></table></figure>
<p><strong>撤消操作</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 提交完了才发现漏掉了几个文件没有添加，或者提交信息写错了。</span><br><span class="line"><span class="meta">#</span> 可以运行带有 --amend 选项的提交命令尝试重新提交，重新提交时会启动文本编辑器，</span><br><span class="line"><span class="meta">#</span> 显示之前的提交信息。编辑后保存会覆盖原来的提交信息。</span><br><span class="line"><span class="meta">#</span> 最终你只会有一个提交 - 第二次提交将代替第一次提交的结果。</span><br><span class="line"><span class="meta">$</span> git commit -m 'initial commit'</span><br><span class="line"><span class="meta">$</span> git add forgotten_file</span><br><span class="line"><span class="meta">$</span> git commit --amend</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 已经修改了两个文件并且想要将它们作为两次独立的修改提交，但是却意外地输入了</span><br><span class="line"><span class="meta">#</span> git add * 暂存了它们两个，可以用 git reset HEAD 取消暂存 CONTRIBUTING.md 文件。</span><br><span class="line"><span class="meta">$</span> git add *</span><br><span class="line"><span class="meta">$</span> git reset HEAD CONTRIBUTING.md</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 如果你并不想保留对 CONTRIBUTING.md 文件的修改怎么办？</span><br><span class="line"><span class="meta">#</span> 可以运行 git checkout -- [file] 命令撤销对文件的修改。</span><br><span class="line"><span class="meta">$</span> git checkout -- CONTRIBUTING.md</span><br></pre></td></tr></table></figure>
<p><strong><em>NOTE</em></strong><br>虽然在调用时加上 –hard 选项可以令 git reset 成为一个危险的命令（译注：可能导致工作目录中所有当前进度丢失！），但本例中工作目录内的文件并不会被修改。不加选项地调用 git reset 并不危险 — 它只会修改暂存区域。</p>
<p><strong><em>IMPORTANT</em></strong><br>git checkout – [file] 是一个危险的命令。你对那个文件做的任何修改都会消失，你只是拷贝了另一个文件来覆盖它。记住，在 Git 中任何已提交的东西几乎总是可以恢复的，甚至那些被删除的分支中的提交或使用 –amend 选项覆盖的提交也可以恢复。然而，任何你未提交的东西丢失后很可能再也找不到了。</p>
<p><strong>远程仓库的使用</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 查看已经配置的远程仓库服务器</span><br><span class="line"><span class="meta">$</span> git remote</span><br><span class="line">origin</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 添加一个新的远程 Git 仓库，同时指定一个你可以轻松引用的简写</span><br><span class="line"><span class="meta">$</span> git remote add pb https://github.com/paulboone/ticgit</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 指定选项 -v，显示远程仓库使用的 Git 保存的简写与其对应的 URL。</span><br><span class="line"><span class="meta">$</span> git remote -v</span><br><span class="line">origin  https://github.com/schacon/ticgit (fetch)</span><br><span class="line">origin  https://github.com/schacon/ticgit (push)</span><br><span class="line">pb  https://github.com/paulboone/ticgit (fetch)</span><br><span class="line">pb  https://github.com/paulboone/ticgit (push)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 使用字符串 pb 来代替整个 URL，拉取 Paul 的远程仓库中有但本地仓库里没有的信息</span><br><span class="line"><span class="meta">#</span> 必须注意 git fetch 命令会将数据拉取到本地仓库，它并不会自动合并或修改当前的</span><br><span class="line"><span class="meta">#</span> 工作，当准备好时你必须手动将其合并入你的工作。</span><br><span class="line"><span class="meta">#</span> 可以使用 git pull 命令来自动的抓取然后合并远程分支到当前分支。</span><br><span class="line"><span class="meta">$</span> git fetch pb</span><br><span class="line">remote: Counting objects: 43, done.</span><br><span class="line">remote: Compressing objects: 100% (36/36), done.</span><br><span class="line">remote: Total 43 (delta 10), reused 31 (delta 5)</span><br><span class="line">Unpacking objects: 100% (43/43), done.</span><br><span class="line">From https://github.com/paulboone/ticgit</span><br><span class="line">* [new branch] master -&gt; pb/master</span><br><span class="line">* [new branch] ticgit -&gt; pb/ticgit</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 将 master 分支推送到 origin 服务器</span><br><span class="line"><span class="meta">#</span> 只有当你有所克隆服务器的写入权限，并且之前没有人推送过时，这条命令才能生效。</span><br><span class="line"><span class="meta">$</span> git push origin master</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看某一个远程仓库的详细信息</span><br><span class="line"><span class="meta">$</span> git remote show origin</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 修改一个远程仓库的简写名。例如，想要将 pb 重命名为 paul</span><br><span class="line"><span class="meta">$</span> git remote rename pb paul</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 移除一个远程仓库，例如已经从服务器上搬走了或不再想使用某一个特定的镜像了，</span><br><span class="line"><span class="meta">#</span> 又或者某一个贡献者不再贡献了</span><br><span class="line"><span class="meta">$</span> git remote rm paul</span><br></pre></td></tr></table></figure>
<p><strong>打标签</strong></p>
<p>Git 可以给历史中的某一个提交打上标签，以示重要。比较有代表性的是使用这个功能来标记发布结点（v1.0 等等）。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 列出标签</span><br><span class="line"><span class="meta">$</span> git tag</span><br><span class="line">v0.1</span><br><span class="line">v1.3</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 使用特定的模式查找标签</span><br><span class="line"><span class="meta">$</span> git tag -l 'v1.8.5*'</span><br><span class="line">v1.8.5</span><br><span class="line">v1.8.5-rc0</span><br><span class="line">v1.8.5.1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 创建附注标签（annotated）</span><br><span class="line"><span class="meta">#</span> 附注标签是存储在 Git 数据库中的一个完整对象。它们是可以被校验的；</span><br><span class="line"><span class="meta">#</span> 其中包含打标签者的名字、电子邮件地址、日期时间；还有一个标签信息；</span><br><span class="line"><span class="meta">#</span> 并且可以使用 GNU Privacy Guard（GPG）签名与验证。</span><br><span class="line"><span class="meta">#</span> 也可以对过去的提交打标签。</span><br><span class="line"><span class="meta">$</span> git tag -a v1.4 -m 'my version 1.4'</span><br><span class="line"><span class="meta">$</span> git tag -a v1.2 9fceb02</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 创建轻量标签（lightweight）</span><br><span class="line"><span class="meta">#</span> 一个轻量标签很像一个不会改变的分支 - 它只是一个特定提交的引用。</span><br><span class="line"><span class="meta">#</span> 轻量标签本质上是将提交校验和存储到一个文件中 - 没有保存任何其他信息。</span><br><span class="line"><span class="meta">$</span> git tag v1.4-lw</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看标签信息与对应的提交信息</span><br><span class="line"><span class="meta">$</span> git show v1.4</span><br><span class="line">tag v1.4</span><br><span class="line">Tagger: Ben Straub &lt;ben@straub.cc&gt;</span><br><span class="line">Date: Sat May 3 20:19:12 2014 -0700</span><br><span class="line"></span><br><span class="line">my version 1.4</span><br><span class="line"></span><br><span class="line">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date: Mon Mar 17 21:52:11 2008 -0700</span><br><span class="line"></span><br><span class="line">    changed the version number</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 默认情况下，git push 命令并不会传送标签到远程仓库服务器上。</span><br><span class="line"><span class="meta">#</span> 在创建完标签后你必须显式地推送标签到共享服务器上。</span><br><span class="line"><span class="meta">#</span> 使用带有 --tags 选项可以一次性推送很多标签。</span><br><span class="line"><span class="meta">$</span> git push origin v1.5</span><br><span class="line"><span class="meta">$</span> git push origin --tags</span><br><span class="line">Counting objects: 1, done.</span><br><span class="line">Writing objects: 100% (1/1), 160 bytes | 0 bytes/s, done.</span><br><span class="line">Total 1 (delta 0), reused 0 (delta 0)</span><br><span class="line">To git@github.com:schacon/simplegit.git</span><br><span class="line">* [new tag] v1.4 -&gt; v1.4</span><br><span class="line">* [new tag] v1.4-lw -&gt; v1.4-lw</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 检出标签</span><br><span class="line"><span class="meta">#</span> 在 Git 中你并不能真的检出一个标签，因为它们并不能像分支一样来回移动。</span><br><span class="line"><span class="meta">#</span> 如果要工作目录与仓库中特定的标签版本完全一样，可以使用 git checkout -b</span><br><span class="line"><span class="meta">#</span> [branchname] [tagname] 在特定的标签上创建一个新分支：</span><br><span class="line"><span class="meta">$</span> git checkout -b version2 v2.0.0</span><br><span class="line">Switched to a new branch 'version2'</span><br></pre></td></tr></table></figure>
<p><strong>Git 别名</strong></p>
<p>Git 并不会在你输入部分命令时自动推断出你想要的命令。如果不想每次都输入完整的 Git 命令，可以通过 git config 文件来轻松地为每一个命令设置一个别名。若要执行外部命令，而不是一个 Git 子命令，可以在命令前面加入 ! 符号。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git config --global alias.co checkout</span><br><span class="line"><span class="meta">$</span> git config --global alias.br branch</span><br><span class="line"><span class="meta">$</span> git config --global alias.ci commit</span><br><span class="line"><span class="meta">$</span> git config --global alias.st status</span><br><span class="line"><span class="meta">$</span> git config --global alias.unstage 'reset HEAD --'</span><br><span class="line"><span class="meta">$</span> git config --global alias.last 'log -1 HEAD'</span><br><span class="line"><span class="meta">$</span> git config --global alias.visual '!gitk'</span><br></pre></td></tr></table></figure></p>
<h2 id="Git-分支"><a href="#Git-分支" class="headerlink" title="Git 分支"></a>Git 分支</h2><p><strong>分支简介</strong></p>
<p>Git 的分支，其实本质上仅仅是指向提交对象的可变指针。Git 的默认分支名字是 master。在 Git 中，HEAD 是一个指针，指向当前所在的本地分支。</p>
<p>由于 Git 的分支实质上仅是包含所指对象校验和（长度为 40 的 SHA-1 值字符串）的文件，所以它的创建和销毁都异常高效。同时，由于每次提交都会记录父对象，所以寻找恰当的合并基础也是同样的简单和高效。这些高效的特性使得 Git 鼓励开发人员频繁地创建和使用分支。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 查看分支列表</span><br><span class="line"><span class="meta">#</span> * 字符：代表当前 HEAD 指针所指向的分支。</span><br><span class="line"><span class="meta">$</span> git branch</span><br><span class="line">  iss53</span><br><span class="line">* master</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看每一个分支的最后一次提交</span><br><span class="line"><span class="meta">$</span> git branch -v</span><br><span class="line">  iss53 93b412c fix javascript issue</span><br><span class="line">* master 7a98805 Merge branch 'iss53'</span><br><span class="line">  testing 782fd34 add scott to the author list in the readmes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 过滤已经合并或尚未合并到当前分支的分支</span><br><span class="line"><span class="meta">$</span> git branch --merged</span><br><span class="line">  iss53</span><br><span class="line">* master</span><br><span class="line"><span class="meta">$</span> git branch --no-merged</span><br><span class="line">  testing</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 分支创建</span><br><span class="line"><span class="meta">#</span> 创建一个 testing 分支。</span><br><span class="line"><span class="meta">$</span> git branch testing</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看各个分支当前所指的对象，提供这一功能的参数是 --decorate</span><br><span class="line"><span class="meta">$</span> git log --oneline --decorate</span><br><span class="line">0b8d0f9 (HEAD, origin/master, origin/HEAD, testing, master) git config alias.</span><br><span class="line">66ad18a git tag</span><br><span class="line">b7dcb4c (tag: v1.0) --amend &amp;&amp; reset Head &amp;&amp; checkout -- &lt;file&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看分叉历史</span><br><span class="line"><span class="meta">$</span> git log --oneline --decorate --graph --all</span><br><span class="line">*   28bec49 (HEAD, master) git merge</span><br><span class="line">|\</span><br><span class="line">| * faaf36e (testing) test branch-testing</span><br><span class="line">* | c7da839 add Readme.md</span><br><span class="line">* | 13960c6 git branch with git rm --cached</span><br><span class="line">|/</span><br><span class="line">* 0b8d0f9 (origin/master, origin/HEAD) git config alias.* ''</span><br><span class="line">* 66ad18a git tag</span><br><span class="line">* b7dcb4c (tag: v1.0) --amend &amp;&amp; reset Head &amp;&amp; checkout -- &lt;file&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 分支切换</span><br><span class="line"><span class="meta">#</span> 在切换分支时，一定要注意你工作目录里的文件会被改变。</span><br><span class="line"><span class="meta">#</span> 如果是切换到一个较旧的分支，你的工作目录会恢复到该分支最后一次提交时的样子。</span><br><span class="line"><span class="meta">#</span> 带有 -b 参数的命令新建一个分支并同时切换到那个分支上。</span><br><span class="line"><span class="meta">$</span> git checkout testing</span><br><span class="line"><span class="meta">$</span> git checkout -b iss53</span><br><span class="line">等同于：</span><br><span class="line"><span class="meta">$</span> git branch iss53</span><br><span class="line"><span class="meta">$</span> git checkout iss53</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> fast-forward 合并回 master 分支</span><br><span class="line"><span class="meta">#</span> 当你试图合并两个分支时，如果顺着一个分支走下去能够到达另一个分支，那么 Git</span><br><span class="line"><span class="meta">#</span> 在合并两者的时候，只会简单的将指针向前推进（指针右移），因为这种情况下的合并</span><br><span class="line"><span class="meta">#</span> 操作没有需要解决的分歧——这就叫做 “快进（fast-forward）”。</span><br><span class="line"><span class="meta">$</span> git checkout master</span><br><span class="line"><span class="meta">$</span> git merge hotfix</span><br><span class="line">Updating f42c576..3a0874c</span><br><span class="line">Fast-forward</span><br><span class="line">index.html | 2 ++</span><br><span class="line">1 file changed, 2 insertions(+)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> diverged 合并回 master 分支</span><br><span class="line"><span class="meta">#</span> 在这种情况下，你的开发历史从一个更早的地方开始分叉开来（diverged）。因为，</span><br><span class="line"><span class="meta">#</span> master 分支所在提交并不是 iss53 分支所在提交的直接祖先，Git 会使用两个分支</span><br><span class="line"><span class="meta">#</span> 的末端所指的快照以及这两个分支的工作祖先，做一个简单的三方合并。</span><br><span class="line"><span class="meta">$</span> git checkout master</span><br><span class="line"><span class="meta">$</span> git merge iss53</span><br><span class="line">Merge made by the 'recursive' strategy.</span><br><span class="line">index.html | 1 +</span><br><span class="line">1 file changed, 1 insertion(+)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 遇到冲突时的分支合并</span><br><span class="line"><span class="meta">#</span> 如果你在两个不同的分支中，对同一个文件的同一个部分进行了不同的修改，Git 就</span><br><span class="line"><span class="meta">#</span> 没法干净的合并它们。此时 Git 做了合并，但是没有自动地创建一个新的合并提交。</span><br><span class="line"><span class="meta">#</span> 在合并冲突后使用 git status 查看那些因包含合并冲突而处于未合并（unmerged）</span><br><span class="line"><span class="meta">#</span> 状态的文件。任何因包含合并冲突而有待解决的文件，都会以未合并状态标识出来。</span><br><span class="line"><span class="meta">#</span> Git 会在有冲突的文件中加入标准的冲突解决标记，这样你可以打开这些包含冲突的</span><br><span class="line"><span class="meta">#</span> 文件然后手动解决冲突。</span><br><span class="line"><span class="meta">$</span> git merge iss53</span><br><span class="line">Auto-merging index.html</span><br><span class="line">CONFLICT (content): Merge conflict in index.html</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br><span class="line"><span class="meta">$</span> git status</span><br><span class="line">On branch master</span><br><span class="line">You have unmerged paths.</span><br><span class="line">    (fix conflicts and run "git commit")</span><br><span class="line">Unmerged paths:</span><br><span class="line">    (use "git add &lt;file&gt;..." to mark resolution)</span><br><span class="line">    both modified: index.html</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 手动解决冲突</span><br><span class="line"><span class="meta">#</span> 解决了所有文件里的冲突之后，对每个文件使用 git add 命令来将其标记为冲突</span><br><span class="line"><span class="meta">#</span> 已解决。一旦暂存这些原本有冲突的文件，Git 就会将它们标记为冲突已解决。</span><br><span class="line"><span class="meta">#</span> 出现冲突的文件会包含一些特殊区段，看起来像下面这个样子：</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:index.html</span><br><span class="line">&lt;div id="footer"&gt;contact : email.support@github.com&lt;/div&gt;</span><br><span class="line">=======</span><br><span class="line">&lt;div id="footer"&gt;</span><br><span class="line">please contact us at support@github.com</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt;&gt;&gt;&gt;&gt; iss53:index.html</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 使用图形化工具来解决冲突</span><br><span class="line"><span class="meta">#</span> 退出合并工具之后，Git 会询问刚才的合并是否成功。如果你回答是，Git 会暂存</span><br><span class="line"><span class="meta">#</span> 那些文件以表明冲突已解决，这时你可以输入 git commit 来完成合并提交。</span><br><span class="line"><span class="meta">$</span> git mergetool</span><br><span class="line">Merging:</span><br><span class="line">index.html</span><br><span class="line"></span><br><span class="line">Normal merge conflict for 'index.html':</span><br><span class="line">    &#123;local&#125;: modified file</span><br><span class="line">    &#123;remote&#125;: modified file</span><br><span class="line">Hit return to start merge resolution tool (opendiff):</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 删除分支</span><br><span class="line"><span class="meta">$</span> git branch -d hotfix</span><br><span class="line">Deleted branch hotfix (3a0874c).</span><br></pre></td></tr></table></figure>
<p><strong>远程分支</strong></p>
<p>远程引用是对远程仓库的引用（指针），包括分支、标签等等。<br>远程跟踪分支是远程分支状态的引用。它们是不能移动的本地引用，当做任何网络通信操作时，它们会自动移动。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 查看远程仓库的更多信息</span><br><span class="line"><span class="meta">$</span> git remote show origin</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看远程跟踪分支 origin/master</span><br><span class="line"><span class="meta">$</span> git log  --oneline --decorate --graph --all</span><br><span class="line">* 3d9da59 (HEAD, master) test remote-branch with local modify</span><br><span class="line">| * 74dfd7a (origin/master, origin/HEAD) 更新 README.md</span><br><span class="line">|/</span><br><span class="line">* 1f7b1ea git merge and git branch</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 从 Github 克隆，自动将 Github 服务器命名为 origin，拉取它的所有数据，创建一个</span><br><span class="line"><span class="meta">#</span> 名为 origin/master 指向 Github 服务器的 master 分支的指针，也会创建一个名为</span><br><span class="line"><span class="meta">#</span> master 的本地分支。-o 选项指定创建的远程仓库名字，示例中默认的远程分支名字</span><br><span class="line"><span class="meta">#</span> 将会是 booyah/master。</span><br><span class="line"><span class="meta">$</span> git clone https://github.com/git/git.git</span><br><span class="line"><span class="meta">$</span> git clone -o booyah https://github.com/git/git.git</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 同步远程仓库</span><br><span class="line"><span class="meta">#</span> 从 “origin” 服务器中抓取本地没有的数据，并且更新本地数据库，</span><br><span class="line"><span class="meta">#</span> 移动 origin/master 指针指向新的、更新后的位置。</span><br><span class="line"><span class="meta">$</span> git fetch origin</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 推送分支</span><br><span class="line"><span class="meta">#</span> Git 自动将 serverfix 名字展开为 refs/heads/serverfix:refs/heads/serverfix，</span><br><span class="line"><span class="meta">#</span> 那意味着，“推送本地的 serverfix 分支来更新远程仓库上的 serverfix 分支。</span><br><span class="line"><span class="meta">$</span> git push origin serverfix</span><br><span class="line">Counting objects: 24, done.</span><br><span class="line">Delta compression using up to 8 threads.</span><br><span class="line">Compressing objects: 100% (15/15), done.</span><br><span class="line">Writing objects: 100% (24/24), 1.91 KiB | 0 bytes/s, done.</span><br><span class="line">Total 24 (delta 2), reused 0 (delta 0)</span><br><span class="line">To https://github.com/schacon/simplegit</span><br><span class="line"> * [new branch] serverfix -&gt; serverfix</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 推送本地的 serverfix 分支到远程仓库上的 awesomebranch 分支</span><br><span class="line">git push origin serverfix:awesomebranch</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 推送时避免每次输入密码</span><br><span class="line"><span class="meta">#</span> 使用 HTTPS URL 来推送时，Git 服务器会询问用户名与密码。</span><br><span class="line"><span class="meta">#</span> 默认情况下它会在终端中提示服务器是否允许你进行推送。</span><br><span class="line"><span class="meta">#</span> 如果不想在每一次推送时都输入用户名与密码，可以设置一个 “credential cache”。</span><br><span class="line"><span class="meta">$</span> git config --global credential.helper cache</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 跟踪分支</span><br><span class="line"><span class="meta">#</span> 从一个远程跟踪分支检出一个本地分支会自动创建“跟踪分支”。如果在一个跟踪分支</span><br><span class="line"><span class="meta">#</span> 上输入 git pull，Git 能自动地识别去哪个服务器上抓取、合并到哪个分支。</span><br><span class="line"><span class="meta">#</span> checkout --track 自动创建跟踪分支，-b 将本地分支与远程分支设置为不同名字。</span><br><span class="line"><span class="meta">#</span> branch -u 或 --set-upstream-to 修改正在跟踪的上游分支，</span><br><span class="line"><span class="meta">#</span> branch -vv 查看设置的所有跟踪分支。</span><br><span class="line"><span class="meta">$</span> git checkout --track origin/serverfix</span><br><span class="line"><span class="meta">$</span> git checkout -b sf origin/serverfix</span><br><span class="line"><span class="meta">$</span> git branch -u origin/serverfix</span><br><span class="line"><span class="meta">$</span> git branch -vv</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 拉取</span><br><span class="line"><span class="meta">#</span> 当 git fetch 命令从服务器上抓取本地没有的数据时，它并不会修改工作目录中的内容。</span><br><span class="line"><span class="meta">#</span> 它只会获取数据然后让你自己合并。</span><br><span class="line"><span class="meta">$</span> git pull --all</span><br><span class="line">等同于</span><br><span class="line"><span class="meta">$</span> git fetch --all ; git merge --all</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 删除远程分支</span><br><span class="line"><span class="meta">$</span> git push origin --delete serverfix</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 变基</span><br><span class="line"><span class="meta">$</span> git checkout experiment</span><br><span class="line"><span class="meta">$</span> git rebase master</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: added staged command</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> --onto 选项，示例里将选中在 client 分支里但不在 server 分支里的修改，</span><br><span class="line"><span class="meta">#</span> 将它们在 master 分支上重演。</span><br><span class="line"><span class="meta">$</span> git rebase --onto master server client</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 将 server 中的修改变基到 master 上，server 中的代码被“续”到了 master 后面。</span><br><span class="line"><span class="meta">$</span> git rebase master server</span><br></pre></td></tr></table></figure>
<h2 id="服务器上的-Git"><a href="#服务器上的-Git" class="headerlink" title="服务器上的 Git"></a>服务器上的 Git</h2><p>一个远程仓库通常只是一个裸仓库（bare repository）——即一个没有当前工作目录的仓库。因为该仓库仅仅作为合作媒介，不需要从磁碟检查快照；存放的只有 Git 的资料。简单的说，裸仓库就是专案目录内的 .git 子目录内容，不包含其他资料。</p>
<p><strong>协议</strong></p>
<p>Git 可以使用四种主要的协议来传输资料：本地协议（Local），HTTP 协议，SSH（Secure Shell）协议及 Git 协议。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/02/23/hello-world/" rel="next" title="Hello World">
                <i class="fa fa-chevron-left"></i> Hello World
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/02/23/PracticalVim/" rel="prev" title="">
                 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">UpperYounger</p>
              <p class="site-description motion-element" itemprop="description">Just do it!</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ProGit"><span class="nav-number">1.</span> <span class="nav-text">ProGit</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#起步"><span class="nav-number">1.1.</span> <span class="nav-text">起步</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#从源代码安装"><span class="nav-number">1.1.1.</span> <span class="nav-text">从源代码安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#初次运行Git前的配置"><span class="nav-number">1.1.2.</span> <span class="nav-text">初次运行Git前的配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Git-基础"><span class="nav-number">1.2.</span> <span class="nav-text">Git 基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#获取-Git-仓库"><span class="nav-number">1.2.1.</span> <span class="nav-text">获取 Git 仓库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#记录每次更新到仓库"><span class="nav-number">1.2.2.</span> <span class="nav-text">记录每次更新到仓库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Git-分支"><span class="nav-number">1.3.</span> <span class="nav-text">Git 分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务器上的-Git"><span class="nav-number">1.4.</span> <span class="nav-text">服务器上的 Git</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">UpperYounger</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Gemini</a> v6.0.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.3"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
